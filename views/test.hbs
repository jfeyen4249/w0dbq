<!DOCTYPE html>
<html>
<head>
  <title>Slideshow</title>
  <style>
    .slideshow {
      position: relative;
      width: 100%;
      height: 400px;
      overflow: hidden;
    }
    
    .slideshow img,
    .slideshow video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .slideshow-controls {
      position: absolute;
      bottom: 10px;
      left: 10px;
      z-index: 1;
    }
    
    .slideshow-controls button {
      margin-right: 5px;
    }
    
    .slideshow-description {
      position: absolute;
      bottom: 10px;
      left: 0;
      width: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 5px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="slideshow"></div>

  <script>
	console.log('Fetch')
    // Fetch the data for the slideshow
    fetch('/slideshow')
      .then(response => response.json())
      .then(data => {
		console.log(data)
        const slideshow = document.querySelector('.slideshow');
        const slideshowControls = document.createElement('div');
        const slideshowDescription = document.createElement('div');
        
        slideshowControls.className = 'slideshow-controls';
        slideshowDescription.className = 'slideshow-description';
        
        slideshow.appendChild(slideshowControls);
        slideshow.appendChild(slideshowDescription);
        
        // Iterate over the data and create slideshow elements
        data.forEach((item, index) => {
          const slide = document.createElement('div');
          const description = document.createElement('p');
          
          slide.style.display = 'none';
          slide.appendChild(description);
          
          if (item.filetype === 'image') {
            const image = document.createElement('img');
            image.src = item.url;
            slide.appendChild(image);
          } else if (item.filetype === 'video') {
            const video = document.createElement('video');
            video.src = item.url;
            video.controls = true;
            slide.appendChild(video);
          }
          
          slideshow.appendChild(slide);
          
          // Add description text
          description.innerText = item.description;
          
          // Add control buttons
          const backButton = document.createElement('button');
          backButton.innerText = 'Back';
          backButton.addEventListener('click', () => showSlide(index - 1));
          
          const playPauseButton = document.createElement('button');
          playPauseButton.innerText = 'Pause';
          playPauseButton.addEventListener('click', togglePlayPause);
          
          const forwardButton = document.createElement('button');
          forwardButton.innerText = 'Forward';
          forwardButton.addEventListener('click', () => showSlide(index + 1));
          
          slideshowControls.appendChild(backButton);
          slideshowControls.appendChild(playPauseButton);
          slideshowControls.appendChild(forwardButton);
        });
        
        const slides = Array.from(slideshow.children).slice(1); // Exclude controls and description
        
        let currentSlide = 0;
        let isPlaying = true;
        let autoplayInterval;
        
        function showSlide(index) {
          slides[currentSlide].style.display = 'none';
          currentSlide = (index + slides.length) % slides.length;
          slides[currentSlide].style.display = 'block';
          slideshowDescription.innerText = slides[currentSlide].querySelector('p').innerText;
        }
        
        function togglePlayPause() {
          isPlaying = !isPlaying;
         
